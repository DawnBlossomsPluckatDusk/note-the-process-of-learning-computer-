# Verilog笔记

## Verilog的主要特性

+ 可采用3种不同的方式进行设计建模
  + 行为级描述：使用过程化结构建模
  + 数据流描述：使用连续赋值语句建模
  + 结构化方式：使用门和模块例化语句
+ 两类数据类型：
  + 线网(`wire`) : 表示物理元件之间的连线
  + 寄存器(`reg`) : 表示抽象的数据存储元件
+ 能够描述层次设计
+ 原语可以是组合逻辑也可以是时序逻辑
+ 提供显示语言结构指定设计中的指定端口到端口的时延，以及路径时延和时序检查
+ 同一语言可用于生成模拟激励和指定测试的约束条件



## 主要应用---生成专用集成电路

+ 可编程逻辑器件
+ 半定制或全定制ASIC
+ 混合ASIC

## Verilog的设计方法

+ 采用自顶向下的设计方法

一般的设计流程:

1. 需求分析
2. 功能划分
3. 文本描述
4. 功能仿真
5. 逻辑综合
6. 布局布线
7. 时序仿真
8. FPGA/CPLD下载或 ASIC制造工艺生产



## 基础语法

+ 区分大小写
+ 格式自由，没有换行限制
+ 每个语句以分号结束

### 注释

`//`单行注释

`/* */`多行注释

### 标识符与关键字

**标识符**：任意一组字母，数字，`$`符号和`_`符号，标识符第一个字符必须是字母或下划线



## 数值表示

### 种类

+ 0：逻辑 0 和假
+ 1： 逻辑 1 和真
+ x或X ：未知 --> 信号可能是1，也可能是0
+ z或Z ： 高阻 --> 信号没有驱动时的逻辑结果

### 整数数值表示

合法的基数格式：十进制，十六进制，二进制，八进制

```verilog
4'b1011  //指明位宽为4，二进制
32'h3022_c0de   //指明位宽为32，16进制，下划线只是增强代码可读性，没有实际的作用
'o1024   //十进制，没有指明位宽
100     //默认为十进制
```



==负数表示==：

在最前面加上负号，如果指明位宽，则加在位宽之前



==实数表示==：

+ 十进制： `30.123 , 20.156 ...`
+ 科学计数法：`1.24e4 , 1_001e5 , 1E-8`



==字符串表示==：

字符串是由双引号包起来的字符队列 **字符串中不能包含回车符**

==Verilog 将字符串当做一系列的单字节 ASCII 字符队列==



```verilog
reg [0:14*8-1] str;
initial begin
    str = "www.zcc.com";
end
```



## 数据类型

### 线网

表示硬件单元之间的物理连线，由其连接的器件输出端连续驱动。

如果没有驱动单元连接到wire型变量，缺省值一般为`Z`

声明：

```verilog
wire interrupt;
wire flag1,flag2;
wire gnd = 1'b0;
```



### 寄存器

用来表示存储单元，会保持数据原有的值，直到被改写.

声明：

```verilog
reg clk_tmp;
reg falg1,flag2;
```



==寄存器不需要驱动源，也不一定需要时钟信号==

### 向量

当位宽大于`1`时，`wire`或`reg`可以声明为向量的形式

```verilog
reg [3:0]  counter;        //声明4bit位宽的寄存器
wire [32-1:0] gpio_data;   //声明32bit位宽的线网
wire [8:2] addr;           //声明7位宽的线网，位宽范围8：2
reg  [0:31] data;          //声明32bit位宽的寄存器，最高有效位为0
```

