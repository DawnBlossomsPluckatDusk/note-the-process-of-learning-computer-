# 树莓派基础知识

## 增加B+型树莓派的USB输出电流

默认为600mA，可以配置为1.2A

1. 修改`/boot/config.txt`文件

	添加：

	```
	safe_mode_gpio = 4
	max_usb_current = 1
	```

	

2. 控制树莓派外部引脚，BCM ARM芯片的38引脚控制USB的电流输出，所以通过`gpio`命令可以进行更改

	```
	在终端中输入:
	gpio -g write 38 0   # BCM的引脚38输出低电平时，对应USB端口输出600mA
	gpio -g mode 38 out  # 将BCM的引脚38设置为输出模式
	gpio -g write 38 1   # BCM的引脚38输出为高电平时，对应USB端口输出1.2A
	```

	先设置引脚38为输出，再设置输出的电平，目的是为了避免输出失误

**当发现B+树莓派的电源指示灯闪烁时，说明目前供电不足**

**由于供电电流不足，B型树莓派可能会启动失败，不断重启**



## 常见的芯片封装形式

1. 双列直插封装(DIP)
2. 单列直插封装(SIP)
3. 小外形晶体管封装(SOT)
4. 塑料有引线芯片载体(PLCC)
5. 薄型QFP(LQFP)
6. 金属圆形封装(TO)
7. 双列表面安装封装(SOP)
8. 薄型缩小SOP(TSSOP)
9. 插针网格阵列(PGA)
10. 球栅阵列封装(BGA)



![各种封装图片](https://lh3.googleusercontent.com/proxy/emkskz52VfA_VRvvgnEA2BYoutstmrp6EdD6YJCENJsTc-US2CqytOzFi6CTFndx0ize9sy-pHYlcTc2t9WLsUEJI61-sgXnTudyM3210vrG4L51HDFwipA)



## 关于SDRAM

经历了四代：

1. SDR 
2. DDR
3. DDR2
4. DDR3

重要参数：**容量** 和 **时钟周期**

+ 容量=存储单元\*体\*每个存储单元的位数

SDRAM中的重要概念：**物理Bank** 和 **芯片位宽**

+ 物理Bank：处理器和SDRAM进行数据交换所需的数据总线宽度
+ 芯片位宽：SDRAM芯片数据总线的位宽

## Package on Package(PoP)

一种芯片安装方式---将两个芯片层叠安装起来 



## LED指示灯

| LED名称 | 颜色 | 功能             | 状态说明                             |
| ------- | ---- | ---------------- | ------------------------------------ |
| ACT     | 绿色 | SD卡状态         | 读/写SD卡时点亮                      |
| PWD     | 红色 | 供电状态         | 正常供电时点亮；闪烁时，说明供电不足 |
| FDX     | 绿色 | 通信状态         | 网卡处于全双工时点亮                 |
| LNK     | 绿色 | 网络连接状态     | 有线网卡正常连接时点亮               |
| 100     | 绿色 | 10M/100M网络状态 | 有线网卡连接到100M时点亮             |

## 显示器接口

树莓派采用的是HDMI接口---分为三类(A，C，D)

传统显示器大多数使用的是VGA接口(D-sub)

DVI是数字视频接口的简称，完整的DVI显示系统包括一个作为信号来源的发送器和一个内置在显示器内的接收器

**HDMI到VGA的转换器需要较大的工作电流**

## SD卡接口

该接口兼容SD，MMC，SDIO

+ SD：安全数字卡，基于flash芯片的存储设备，9针数字引脚接口
+ MMC：多媒体卡，7针数字引脚接口
+ SDIO：采用SD卡接口I/O设备，常见：GPS，WiFi，蓝牙设配器

SD卡的分类：

+ 尺寸上：SD卡，MiniSD卡，MicroSD卡
+ 容量上：SD(最大2GB) ，SDHC(2~32GB) ，SDXC(32GB以上)

SD卡的速度：

| SD卡等级 | 速度                            |
| -------- | ------------------------------- |
| class0   | 达不到class1的所有速度          |
| class1   | 最低写入2.0MB/s                 |
| class4   | 最低写入4.0MB/s                 |
| class6   | 最低写入6.0MB/s                 |
| class10  | 最低写入10.0MB/s                |
| UHS-1    | 写入50MB/s以内，读出104MB/s以内 |
| UHS-2    | 写入156MB/s以内，读出32MB/s以内 |

## Linux操作系统简介

**一个完整的Linux操作系统由内核(Kernel)，命令解释层(Shell)，文件系统(File Structure)和实用工具四部分组成**

Linux操作系统的核心是其内核(Kernel)，一个内核可以有多个发行版本，但是，一个发行版只能有一个内核

几种发行版的树莓派版本

+ 基于`Debian`修改的`Raspbian`

	特点：稳定，占用内存小，易用性高，资料较多，支持硬件浮点单元

+ 基于`Fedora`修改的`Pidora`

	特点：图形界面友好，稳定性较差

+ `OpenELEC`和`RaspBMC`操作系统

	用于制作家庭媒体中心

+ `Arch Linux`

	特点：轻量，简洁，没有使用`Debian`和`Red Hat(Fredora)`的包管理器

+ `RISC OS`操作系统

	特点：非Linux架构的操作系统

+ `OpenWRT`操作系统

	特点：高度模块化和自动化



## config.txt文件解析

1. 视频设置参数

	+ `hdmi_safe`: 参数用于设置“安全模式“以尝试使用HDMI最大兼容性来启动输出。

		```
		hdmi_safe = 1
		等价于
		hdmi_force_hotplug = 1
		config_hdmi_boost = 4
		hdmi_group = 2
		hdmi_mode = 4
		disable_overscan = 0
		```

	+ `hdmi_force_hotplug`: 参数用于始终检查HDMI显示器是否被接入，应该默认为1

	+ `HDMI_drive`: 参数用于设置是否使用HDMI接口输出声音，设置为1时，不输出；设置为2时，输出

	+ `config_hdmi_boost`: 参数用于设置HDMI接口输出信号的强度，取值为0~7。如果出现HDMI干扰问题可以设置为4

	+ `disable_overscan`：参数用于设置是否允许显示器进行超出扫描，当设置为1时，禁止超出扫描；设置为0时，允许。

		超出扫描用于设置显示器在显示过程中不显示，有四个参数：`overscan_left`,`overscan_right`,`overscan_top`,`overscan_bottom`

	+ `hdmi_group`和`hdmi_mode`两个参数用于联合设置树莓派输出显示分辨率。

		第一个参数用于设置HDMI的类型，有：0，1，2三个值可选择，分别对应：EDID报告首选组，CEA和DMT。

		常用搭配：

		```
		hdmi_group = 1    hdmi_mode = 4     对应720p  60Hz
		hdmi_group = 1    hdmi_mode = 16    对应1080p 60Hz
		
		hdmi_group = 2    hdmi_mode = 4     对应640X480   60Hz
		hdmi_group = 2    hdmi_mode = 9     对应800X600   60Hz
		hdmi_group = 2    hdmi_mode = 16    对应1024X768  60Hz
		hdmi_group = 2    hdmi_mode = 28    对应1280X800  60Hz
		hdmi_group = 2    hdmi_mode = 47    对应1440X900  60Hz
		hdmi_group = 2    hdmi_mode = 51    对应1600X1200 60Hz
		hdmi_group = 2    hdmi_mode = 81    对应1366X768  60Hz
		hdmi_group = 2    hdmi_mode = 82    对应1920X1080 60Hz
		```

	+ `display_rotate`: 参数用于设置屏幕顺时针旋转的角度，有0, 1($90^o$), 2($180^o$), 3($270^o$), 0x10000(水平翻转), 0x20000(垂直翻转)

	+ `sdty_mode`: 参数用于设置复合信号输出接口(RCA)的视频格式，有：0(NTSC), 1(日本版NTSC), 2(PAL), 3(巴西版PAL)

2. 内存和处理器设置

	+ `arm_freq`: 参数用于设置处理器的工作频率，以MHz为单位，默认700
	+ `core_freq`: 参数用于设置处理器的核心工作频率，以MHz为单位，默认250
	+ `sdram_freq`: 参数用于设置内存的工作频率，以MHz为单位，默认为500
	+ `over_voltage`: 参数用于设置处理器的核心电压调节 取值为：-16~8，0.025V为一个刻度步进，默认0，即核心电压为1.2V
	+ `gpu_men`: 参数用于设置分配给GPU共享的内存大小，单位为MB

