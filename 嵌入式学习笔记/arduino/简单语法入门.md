# 简单arduino语法

[TOC]



## `steup`函数

该函数是初始化函数，是第一个被执行的函数

用于实现设置，初始化等功能

## `loop`函数

是一个无限循环函数，内部代码被反复执行

用于实现功能主体逻辑

## `pinMode`函数

格式：`pinMode(端口,INPUT/OUTPUT);`

作用：设置引脚的模式；一般放在setup中；

## `digitalWrite`函数

格式：`digitWrite(端口,HIGH/LOW);`

说明：数字端口写入函数，使用前需要配置端口模式

## `analogWrite`函数---模拟输出功能

格式：`analogWrite(引脚，模拟值);`

说明： 引脚号的具体取值依赖于使用的开发板；模拟值的范围为0~255

## `delay`函数

格式：`delay(数字);`

说明：延时函数，数字表示延时的毫秒数

## `tone`函数

格式：`tone(引脚，频率);`

说明：在指定引脚发出指定频率的声音功能，需要配合delay函数完成声音的延续

## `notone`函数

格式：`notone(引脚);`

说明：停止指定引脚的声音

## `servo_2.write`函数

格式：`servo_2.write(角度);`

说明：将舵机旋转到一定的角度

[^舵机]: 位置伺服的驱动器，适用于那些需要角度不断变化并且可以保持的控制系统

提示：在使用舵机前，需要进行载入舵机库，声明舵机对象，挂载舵机端口这3步

```c++
#include<Servo.h>   			//载入舵机库
Servo servo_2;        			//声明舵机对象
void setup(){
    servo_2.attach(2);			//挂载舵机端口，挂载在2号引脚
}
```



## 串口的使用(硬件)

在setup函数中配置好串口的通信波特率

+ 函数：`Serial.begin(数字);`

	说明：默认波特率为9600，还可以设置为115200，57600，56000，43000，28800，19200

+ 函数：`Serial.print();和Serial.println()`

	说明：用于向串口输出数据，后者会自动换行
	
+ 函数：`Serial.available();`

  说明：用于监测串口中是否存在数据，存在则，返回值大于0，否则为0

+ 函数：`Serial.read();`

  说明：获取串口上第一个可读取的字节，如果没有可读取的数据则返回-1

## `digitalRead`函数

格式：`digitalRead(端口);`

说明：端口参数可以使用2~13端口。在使用数字传感器读取前，需要在初始化函数中设置引脚模式为OUTPUT输出模式



## attachInterrupt函数

格式：`attachInterrupt(interrupt, ISR, mode);`

说明：外部中断函数

参数：

+ interrupt：中断号。不同开发板不同，例如：`digitalPinToInterrupt(2)`,设置数字引脚2为终端

+ ISR：中断处理函数

+ mode：中断触发方式

	LOW：低电平触发

	CHANGE：引脚状态改变触发

	RISING: 上升沿触发

	FALLING: 下降沿触发



## `map`函数

格式：`map(数值，原开始，原结束，目标开始，目标结束);`

说明：将数值由[原开始，原结束]映射为[目标开始，目标结束]的区间



## 移位函数

格式：`shiftOut(dataPin,clockPin,移位顺序,数值);`

作用：将数据引脚的数值转化为8位二进制，对移位器8个数字引脚进行相应的高低电平输出

参数说明：

`dataPin`:数据引脚

`clockPin`:时钟引脚

移位顺序：高位优先：`MSBFIRST`;低位优先：`LSBFIRST`

## 随机数函数

首先需要在`setup`函数中设置随机种子，才能使用随机函数`random`

设置随机种子：`randomSeed(数值);`  ---->参数数值必须为悬空的模拟输入引脚，设置为模拟量，输入并且悬空

随机函数：`random(最小值,最大值);` --->产生介于最小值和最大值之间的闭区间



